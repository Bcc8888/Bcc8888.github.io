<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>灰之魔女·伊蕾娜的旅行</title>
    <style>
        /* 全局样式：紫黑渐变+柔和字体 */
        body {
            margin: 0;
            padding: 15px;
            font-family: "微软雅黑", "PingFang SC";
            background: linear-gradient(120deg, #f5f0f8, #e6d8f0);
            color: #333;
        }

        /* 主容器：卡片质感+阴影 */
        .main-container {
            max-width: 750px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(122, 60, 184, 0.15);
        }

        /* 标题样式：伊蕾娜紫+装饰线 */
        .title {
            color: #7a3cb8;
            text-align: center;
            font-size: 28px;
            margin: 0 0 20px 0;
            position: relative;
        }
        .title::after {
            content: "";
            display: block;
            width: 80px;
            height: 3px;
            background: #a773d1;
            margin: 8px auto 0;
            border-radius: 2px;
        }

        /* 音乐播放区域（含进度条） */
        .music-control {
            text-align: center;
            margin: 15px 0;
        }
        .music-btn {
            padding: 10px 25px;
            background: #7a3cb8;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }
        .music-btn:hover {
            background: #8c4cc4;
        }
        /* 进度条样式 */
        .progress-container {
            width: 80%;
            height: 8px;
            background: #f0e8f5;
            border-radius: 4px;
            margin: 0 auto;
            cursor: pointer;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            background: #7a3cb8;
            border-radius: 4px;
            width: 0%;
            transition: width 0.2s ease;
        }
        .progress-handle {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 16px;
            height: 16px;
            background: white;
            border: 2px solid #7a3cb8;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .progress-container:hover .progress-handle {
            opacity: 1;
        }
        /* 时间显示 */
        .time-display {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin: 8px auto 0;
            font-size: 12px;
            color: #999;
        }

        /* 登录区域 */
        .login-section {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #f8f0fc;
            border-radius: 10px;
        }
        .login-input {
            margin: 8px 0;
            padding: 8px 12px;
            width: 200px;
            border: 1px solid #e0c8f0;
            border-radius: 6px;
        }
        .login-btn {
            padding: 8px 20px;
            background: #7a3cb8;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 5px;
        }
        .login-btn:hover {
            background: #8c4cc4;
        }
        .user-info {
            color: #7a3cb8;
            font-weight: bold;
            margin: 0;
        }

        /* 旅行帖区域（登录后显示） */
        .post-section {
            margin: 25px 0;
            display: none; /* 默认隐藏，登录后显示 */
        }
        .post-title {
            color: #8c4cc4;
            font-size: 18px;
            margin: 0 0 10px 5px;
        }
        .post-input-area {
            margin-bottom: 15px;
        }
        #postTitleInput {
            width: 100%;
            padding: 10px;
            margin-bottom: 8px;
            border: 1px solid #e0c8f0;
            border-radius: 8px;
            box-sizing: border-box;
        }
        #postContentInput {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border: 1px solid #e0c8f0;
            border-radius: 8px;
            resize: none;
            font-family: inherit;
            box-sizing: border-box;
        }
        #submitPost {
            padding: 8px 20px;
            background: #7a3cb8;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        .post-list {
            margin-top: 20px;
        }
        .post-item {
            background: #f8f0fc;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 1px 5px rgba(122, 60, 184, 0.08);
        }
        .post-item-title {
            color: #7a3cb8;
            font-weight: bold;
            margin: 0 0 8px;
        }
        .post-item-content {
            margin: 0 0 8px;
            line-height: 1.6;
        }
        .post-item-time {
            font-size: 12px;
            color: #999;
        }

        /* 视频区域：统一卡片+间距 */
        .video-section {
            margin: 25px 0;
        }
        .video-title {
            color: #8c4cc4;
            font-size: 18px;
            margin: 0 0 10px 5px;
        }
        .video-card {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(122, 60, 184, 0.1);
            margin-bottom: 20px;
        }
        .video-iframe {
            width: 100%;
            height: 220px; /* 手机端适配高度 */
            border: none;
        }

        /* 伊蕾娜语录板块 */
        .quote-section {
            margin: 25px 0;
        }
        .quote-title {
            color: #8c4cc4;
            font-size: 18px;
            margin: 0 0 15px 5px;
        }
        .quote-card {
            background: #f8f0fc;
            border-left: 4px solid #a773d1;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 10px 0;
            box-shadow: 0 1px 5px rgba(122, 60, 184, 0.08);
        }
        .quote-text {
            margin: 0;
            line-height: 1.7;
            font-style: italic;
            color: #555;
        }

        /* 角色资料：浅紫背景+圆角 */
        .info-card {
            background: #f8f0fc;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
            line-height: 1.8;
        }
        .info-card h2 {
            color: #7a3cb8;
            margin: 0 0 12px 0;
            font-size: 20px;
        }
        .info-item {
            margin: 8px 0;
        }

        /* 评论区板块 */
        .comment-section {
            margin: 30px 0 15px;
        }
        .comment-title {
            color: #8c4cc4;
            font-size: 18px;
            margin: 0 0 15px 5px;
        }
        .comment-input-area {
            margin-bottom: 20px;
        }
        #commentInput {
            width: 100%;
            min-height: 80px;
            padding: 12px;
            border: 1px solid #e0c8f0;
            border-radius: 8px;
            resize: none;
            font-family: inherit;
            font-size: 15px;
            box-sizing: border-box;
        }
        #submitComment {
            margin-top: 10px;
            padding: 8px 20px;
            background: #7a3cb8;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
        }
        #submitComment:hover {
            background: #8c4cc4;
        }
        .comment-list {
            margin-top: 15px;
        }
        .comment-item {
            background: #fff;
            border: 1px solid #f0e8f5;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 1px 4px rgba(122, 60, 184, 0.05);
            position: relative;
        }
        .comment-username {
            font-weight: bold;
            color: #7a3cb8;
            margin: 0 0 5px;
        }
        .comment-content {
            margin: 0;
            line-height: 1.6;
        }
        .comment-time {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }
        /* 点赞按钮样式 */
        .like-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: transparent;
            border: 1px solid #a773d1;
            color: #7a3cb8;
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .like-btn:hover, .like-btn.active {
            background: #f8f0fc;
            color: #8c4cc4;
        }
        /* 删除按钮样式 */
        .delete-comment-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4d4f;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            display: none; /* 登录后显示 */
        }
        .delete-comment-btn:hover {
            background: #ff7875;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- 标题 -->
        <h1 class="title">灰之魔女·伊蕾娜</h1>

        <!-- 音乐播放功能（含进度条） -->
        <div class="music-control">
            <button class="music-btn" id="musicBtn">
                <span>▶️</span> 播放《魔女之旅》OP
            </button>
            
            <!-- 进度条容器 -->
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
                <div class="progress-handle" id="progressHandle"></div>
            </div>
            
            <!-- 时间显示（当前时间/总时长） -->
            <div class="time-display">
                <span id="currentTime">00:00</span>
                <span id="totalTime">00:00</span>
            </div>

            <!-- 网易云音乐音频元素 -->
            <audio id="bgMusic" loop preload="metadata">
                <source src="https://music.163.com/song/media/outer/url?id=1499027682.mp3" type="audio/mpeg">
                您的浏览器不支持音频播放
              </audio>
        </div>

        <!-- 登录区域 -->
        <div class="login-section" id="loginSection">
            <h3>登录（仅伊蕾娜可用）</h3>
            <input type="text" id="usernameInput" class="login-input" placeholder="账号">
            <br>
            <input type="password" id="passwordInput" class="login-input" placeholder="密码">
            <br>
            <button class="login-btn" id="loginBtn">登录</button>
            <p id="loginTip" style="color: #ff4d4f; margin: 8px 0; display: none;">账号或密码错误！</p>
        </div>
        <!-- 登录后显示的用户信息 -->
        <div id="userInfoArea" style="display: none; text-align: center; margin: 10px 0;">
            <p class="user-info">欢迎回来，伊蕾娜~</p>
        </div>

        <!-- 旅行帖区域（登录后显示） -->
        <div class="post-section" id="postSection">
            <h2 class="post-title">伊蕾娜的旅行帖</h2>
            <div class="post-input-area">
                <input type="text" id="postTitleInput" placeholder="旅行帖标题（比如“今天遇到的离谱国家”）">
                <textarea id="postContentInput" placeholder="记录你的旅行故事..."></textarea>
                <button id="submitPost">发布旅行帖</button>
            </div>
            <div class="post-list" id="postList">
                <!-- 旅行帖会在这里显示 -->
            </div>
        </div>

        <!-- 视频区域（替换为你指定的链接） -->
        <div class="video-section">
            <h2 class="video-title">《魔女之旅》8K120FPS OP</h2>
            <div class="video-card">
                <iframe class="video-iframe" src="https://player.bilibili.com/player.html?bvid=BV1pm4y1h7va&page=1" allowfullscreen></iframe>
            </div>

            <h2 class="video-title">《魔女之旅》ED</h2>
            <div class="video-card">
                <iframe class="video-iframe" src="https://player.bilibili.com/player.html?bvid=BV1ui4y1X7hb&page=1" allowfullscreen></iframe>
            </div>

            <h2 class="video-title">伊蕾娜“屑魔女”名场面合集</h2>
            <div class="video-card">
                <iframe class="video-iframe" src="https://player.bilibili.com/player.html?bvid=BV15X4y157nF&page=1" allowfullscreen></iframe>
            </div>
        </div>

        <!-- 伊蕾娜语录板块 -->
        <div class="quote-section">
            <h2 class="quote-title">伊蕾娜的旅行语录</h2>
            <div class="quote-card">
                <p class="quote-text">“我可是很可爱的哦，所以稍微任性一点也没关系吧？”</p>
            </div>
            <div class="quote-card">
                <p class="quote-text">“世界这么大，我想去看看。然后，把看到的都写进日记里。”</p>
            </div>
            <div class="quote-card">
                <p class="quote-text">“即使没有目的地，旅行本身也有意义——毕竟路上的风景，都是独属于我的故事。”</p>
            </div>
            <div class="quote-card">
                <p class="quote-text">“‘屑魔女’？嗯，这个称呼好像也不错~毕竟我可是自由自在的旅行者嘛。”</p>
            </div>
        </div>

        <!-- 角色资料 -->
        <div class="info-card">
            <h2>角色旅行档案</h2>
            <div class="info-item"><strong>魔女名：</strong>灰之魔女</div>
            <div class="info-item"><strong>外貌标识：</strong>银发紫眸 + 黑紫魔法长袍 + 宽檐魔女帽</div>
            <div class="info-item"><strong>性格标签：</strong>天才傲娇 · “屑魔女”毒舌 · 内心温柔细腻</div>
            <div class="info-item"><strong>旅行爱好：</strong>写旅行日记、收集各国甜点、吐槽离谱事件</div>
            <div class="info-item"><strong>CV：</strong>本渡枫</div>
        </div>

        <!-- 评论区（可互动） -->
        <div class="comment-section">
            <h2 class="comment-title">旅行者的评论</h2>
            <div class="comment-input-area">
                <textarea id="commentInput" placeholder="分享你对伊蕾娜的看法、旅行感想..."></textarea>
                <button id="submitComment">提交评论</button>
            </div>
            <div id="commentList" class="comment-list">
                <!-- 评论会在这里显示 -->
            </div>
        </div>
    </div>

    <script>
        // 登录状态管理
        let isLoggedIn = false;

        // 登录相关元素
        const loginSection = document.getElementById('loginSection');
        const userInfoArea = document.getElementById('userInfoArea');
        const usernameInput = document.getElementById('usernameInput');
        const passwordInput = document.getElementById('passwordInput');
        const loginBtn = document.getElementById('loginBtn');
        const loginTip = document.getElementById('loginTip');
        const postSection = document.getElementById('postSection');

        // 登录按钮事件
        loginBtn.addEventListener('click', () => {
            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();
            
            // 验证账号密码（指定：Elaina / 1017）
            if (username === 'Elaina' && password === '1017') {
                isLoggedIn = true;
                loginSection.style.display = 'none';
                userInfoArea.style.display = 'block';
                postSection.style.display = 'block'; // 显示旅行帖区域
                loginTip.style.display = 'none';
                // 显示评论的删除按钮
                document.querySelectorAll('.delete-comment-btn').forEach(btn => {
                    btn.style.display = 'inline-block';
                });
            } else {
                loginTip.style.display = 'block';
            }
        });

        // 旅行帖功能
        const postTitleInput = document.getElementById('postTitleInput');
        const postContentInput = document.getElementById('postContentInput');
        const submitPostBtn = document.getElementById('submitPost');
        const postList = document.getElementById('postList');

        submitPostBtn.addEventListener('click', () => {
            if (!isLoggedIn) return; // 未登录不能发帖子

            const title = postTitleInput.value.trim();
            const content = postContentInput.value.trim();
            if (!title || !content) return;

            // 当前时间
            const now = new Date();
            const timeStr = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });

            // 创建旅行帖元素
            const postItem = document.createElement('div');
            postItem.className = 'post-item';
            postItem.innerHTML = `
                <h3 class="post-item-title">${title}</h3>
                <p class="post-item-content">${content}</p>
                <p class="post-item-time">发布时间：${timeStr}</p>
            `;
            postList.insertBefore(postItem, postList.firstChild);

            // 清空输入框
            postTitleInput.value = '';
            postContentInput.value = '';
        });

        // 评论区功能：提交后显示评论（登录=伊蕾娜，未登录=旅行者）+ 点赞功能
        const commentInput = document.getElementById('commentInput');
        const submitCommentBtn = document.getElementById('submitComment');
        const commentList = document.getElementById('commentList');

        submitCommentBtn.addEventListener('click', () => {
            const content = commentInput.value.trim();
            if (!content) return;

            // 当前时间
            const now = new Date();
            const timeStr = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });

            // 判断登录状态，显示对应用户名
            const commentUsername = isLoggedIn ? '伊蕾娜' : '旅行者';

            // 创建评论元素（包含删除按钮+点赞按钮）
            const commentItem = document.createElement('div');
            commentItem.className = 'comment-item';
            commentItem.innerHTML = `
                <p class="comment-username">${commentUsername}</p>
                <p class="comment-content">${content}</p>
                <p class="comment-time">${timeStr}</p>
                <button class="delete-comment-btn" onclick="this.parentElement.remove()">删除</button>
                <button class="like-btn" onclick="likeComment(this)">
                    ❤️ <span class="like-count">0</span>
                </button>
            `;

            // 登录状态下才显示删除按钮
            if (isLoggedIn) {
                commentItem.querySelector('.delete-comment-btn').style.display = 'inline-block';
            }

            commentList.insertBefore(commentItem, commentList.firstChild);
            commentInput.value = '';
        });

        // 点赞功能
        function likeComment(btn) {
            const likeCount = btn.querySelector('.like-count');
            let count = parseInt(likeCount.textContent);
            if (btn.classList.contains('active')) {
                // 取消点赞
                count--;
                btn.classList.remove('active');
            } else {
                // 点赞
                count++;
                btn.classList.add('active');
            }
            likeCount.textContent = count;
        }

        // 音乐进度条核心功能
        const musicBtn = document.getElementById('musicBtn');
        const bgMusic = document.getElementById('bgMusic');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const progressHandle = document.getElementById('progressHandle');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');
        let isPlaying = false;
        let isDragging = false;

        // 格式化时间（秒转分:秒）
        function formatTime(seconds) {
            const min = Math.floor(seconds / 60);
            const sec = Math.floor(seconds % 60);
            return `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
        }

        // 实时更新进度条和时间
        bgMusic.addEventListener('timeupdate', () => {
            if (isDragging) return; // 拖拽时暂停更新
            const progress = (bgMusic.currentTime / bgMusic.duration) * 100;
            progressBar.style.width = `${progress}%`;
            progressHandle.style.left = `${progress}%`;
            currentTimeEl.textContent = formatTime(bgMusic.currentTime);
        });

        // 音频加载完成后显示总时长
        bgMusic.addEventListener('loadedmetadata', () => {
            totalTimeEl.textContent = formatTime(bgMusic.duration);
        });

        // 播放/暂停切换
        musicBtn.addEventListener('click', async () => {
            try {
                if (isPlaying) {
                    bgMusic.pause();
                    musicBtn.innerHTML = '<span>▶️</span> 播放《魔女之旅》OP';
                } else {
                    await bgMusic.play();
                    musicBtn.innerHTML = '<span>⏸️</span> 暂停《魔女之旅》OP';
                }
                isPlaying = !isPlaying;
            } catch (err) {
                alert('请再点击一次播放按钮~ 若仍无声音，可检查浏览器音量设置');
            }
        });

        // 点击进度条跳转
        progressContainer.addEventListener('click', (e) => {
            const rect = progressContainer.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const progress = (clickX / rect.width) * 100;
            const targetTime = (progress / 100) * bgMusic.duration;
            bgMusic.currentTime = targetTime;
            progressBar.style.width = `${progress}%`;
            progressHandle.style.left = `${progress}%`;
        });

        // 拖拽进度条
        progressContainer.addEventListener('mousedown', () => {
            isDragging = true;
            bgMusic.pause(); // 拖拽时暂停播放
            musicBtn.innerHTML = '<span>▶️</span> 播放《魔女之旅》OP';
            isPlaying = false;
        });

        // 拖拽过程中更新进度条
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const rect = progressContainer.getBoundingClientRect();
            let dragX = e.clientX - rect.left;
            // 限制拖拽范围在0-100%
            dragX = Math.max(0, Math.min(dragX, rect.width));
            const progress = (dragX / rect.width) * 100;
            progressBar.style.width = `${progress}%`;
            progressHandle.style.left = `${progress}%`;
            // 预览当前时间
            const previewTime = (progress / 100) * bgMusic.duration;
            currentTimeEl.textContent = formatTime(previewTime);
        });

        // 结束拖拽，设置播放位置
        document.addEventListener('mouseup', () => {
            if (!isDragging) return;
            isDragging = false;
            const progress = parseFloat(progressBar.style.width);
            const targetTime = (progress / 100) * bgMusic.duration;
            bgMusic.currentTime = targetTime;
        });

        // 手机端触摸事件适配
        progressContainer.addEventListener('touchstart', () => {
            isDragging = true;
            bgMusic.pause();
            musicBtn.innerHTML = '<span>▶️</span> 播放《魔女之旅》OP';
            isPlaying = false;
        });

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            const rect = progressContainer.getBoundingClientRect();
            let touchX = e.touches[0].clientX - rect.left;
            touchX = Math.max(0, Math.min(touchX, rect.width));
            const progress = (touchX / rect.width) * 100;
            progressBar.style.width = `${progress}%`;
            progressHandle.style.left = `${progress}%`;
            const previewTime = (progress / 100) * bgMusic.duration;
            currentTimeEl.textContent = formatTime(previewTime);
        });

        document.addEventListener('touchend', () => {
            if (!isDragging) return;
            isDragging = false;
            const progress = parseFloat(progressBar.style.width);
            const targetTime = (progress / 100) * bgMusic.duration;
            bgMusic.currentTime = targetTime;
        });
    </script>
</body>
</html>
